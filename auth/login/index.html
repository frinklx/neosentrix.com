<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Sign in to your Neolearn account to access AI-powered learning tools"
    />
    <title>Sign In - Neolearn</title>
    <link rel="stylesheet" href="login.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link rel="icon" type="image/svg+xml" href="../../assets/favicon.svg" />
    <script>
      // Theme management
      const getTheme = () => {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme) return savedTheme;
        return window.matchMedia("(prefers-color-scheme: dark)").matches
          ? "dark"
          : "light";
      };

      const setTheme = (theme) => {
        document.documentElement.setAttribute("data-theme", theme);
        localStorage.setItem("theme", theme);
        updateThemeIcon(theme);
      };

      const updateThemeIcon = (theme) => {
        const icon = document.getElementById("theme-icon");
        if (icon) {
          icon.style.transform = "rotate(360deg)";
          setTimeout(() => {
            icon.innerHTML =
              theme === "dark"
                ? '<i class="fas fa-moon"></i>'
                : '<i class="fas fa-sun"></i>';
            icon.style.transform = "rotate(0deg)";
          }, 150);
        }
      };

      // Initialize theme
      document.addEventListener("DOMContentLoaded", () => {
        setTheme(getTheme());
      });

      // Handle system theme changes
      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addEventListener("change", (e) => {
          if (!localStorage.getItem("theme")) {
            setTheme(e.matches ? "dark" : "light");
          }
        });
    </script>
  </head>
  <!-- Google tag (gtag.js) -->
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=G-EZYFSV1NT5"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "G-EZYFSV1NT5");
  </script>
  <body>
    <!-- Theme Toggle Button -->
    <button
      class="theme-toggle"
      onclick="setTheme(getTheme() === 'dark' ? 'light' : 'dark')"
      aria-label="Toggle theme"
    >
      <span id="theme-icon"></span>
    </button>

    <div class="login-container">
      <!-- Hero Section -->
      <div class="login-hero">
        <div class="hero-content">
          <h2>Learn Smarter, Not Harder</h2>
          <p>
            Experience the future of education with our AI-powered learning
            platform. Join thousands of students already transforming their
            study habits.
          </p>
          <ul class="feature-list">
            <li class="feature-item">
              <div class="feature-icon">
                <i class="fas fa-wand-magic-sparkles"></i>
              </div>
              <span>AI-Powered Study Assistant</span>
            </li>
            <li class="feature-item">
              <div class="feature-icon">
                <i class="fas fa-chart-simple"></i>
              </div>
              <span>Smart Progress Tracking</span>
            </li>
            <li class="feature-item">
              <div class="feature-icon">
                <i class="fas fa-lightbulb"></i>
              </div>
              <span>Personalized Learning Path</span>
            </li>
          </ul>
        </div>
      </div>

      <!-- Login Form Section -->
      <div class="login-form-section">
        <!-- Background Elements -->
        <div class="bg-grid"></div>
        <div class="decoration-sphere sphere-1"></div>
        <div class="decoration-sphere sphere-2"></div>
        <div class="decoration-sphere sphere-3"></div>

        <!-- Login Card -->
        <div class="login-card">
          <div class="card-header">
            <a href="/" class="logo">
              <img src="../../assets/favicon.svg" alt="Neolearn Logo" />
              <h1>neolearn</h1>
            </a>
            <p>Welcome back</p>
          </div>

          <form id="loginForm" novalidate>
            <div class="form-group">
              <div class="input-group">
                <i class="far fa-envelope"></i>
                <input
                  type="email"
                  id="email"
                  name="email"
                  placeholder="Email address"
                  required
                />
              </div>
            </div>

            <div class="form-group">
              <div class="input-group">
                <i class="fa fa-lock"></i>
                <input
                  type="password"
                  id="password"
                  name="password"
                  placeholder="Password"
                  required
                />
                <button
                  type="button"
                  class="toggle-password"
                  aria-label="Toggle password visibility"
                >
                  <i class="far fa-eye"></i>
                </button>
              </div>
            </div>

            <div class="form-options">
              <label class="remember-me">
                <input type="checkbox" id="remember" name="remember" />
                <span class="checkmark"></span>
                Remember me
              </label>
              <a href="/auth/reset-password" class="forgot-password"
                >Forgot password?</a
              >
            </div>

            <button type="submit" class="login-btn">
              <span>Continue</span>
              <i class="fas fa-arrow-right"></i>
            </button>

            <div class="social-login">
              <p>Or continue with</p>
              <div class="social-buttons">
                <button type="button" class="social-btn" id="googleLogin">
                  <i class="fab fa-google"></i>
                  <span>Google</span>
                </button>
                <button type="button" class="social-btn" id="githubLogin">
                  <i class="fab fa-github"></i>
                  <span>GitHub</span>
                </button>
              </div>
            </div>
          </form>

          <div class="card-footer">
            <p>New to Neolearn? <a href="/auth/signup">Create an account</a></p>
          </div>
        </div>
      </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="login.js"></script>

    <script>
      // Toggle password visibility
      document
        .querySelector(".toggle-password")
        .addEventListener("click", function () {
          const passwordInput = document.querySelector("#password");
          const icon = this.querySelector("i");

          if (passwordInput.type === "password") {
            passwordInput.type = "text";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash");
          } else {
            passwordInput.type = "password";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
          }
        });

      // Form submission animation
      document
        .getElementById("loginForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const button = this.querySelector(".login-btn");
          button.classList.add("loading");

          // Simulate API call
          setTimeout(() => {
            button.classList.remove("loading");
            // Add success/error handling here
          }, 2000);
        });
    </script>
  </body>
</html>
